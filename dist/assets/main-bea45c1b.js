const c=require("express"),l=require("path"),n=c(),i="https://restcountries.com/v3.1/",a={}.PORT||3e3;n.use(c.static("public"));n.set("view engine","pug");n.set("views",l.join(__dirname,"dist"));n.get("/",async(r,e)=>{try{const o=await(await fetch(`${i}all`)).json(),s=await p(o);e.render("index",{countries:s})}catch(t){console.error(t),e.status(500).send("Internal Server Error")}});n.get("/country/:name",async(r,e)=>{try{const t=r.params.name,o=await fetch(`${i}name/${t}`);if(o.ok){const s=await o.json();if(s.length>0){const u=s[0];e.render("country",{country:u})}else e.status(404).send("Country not found")}else e.status(500).send("Error fetching data")}catch(t){console.error(t),e.status(500).send("Internal Server Error")}});function p(r){return r.sort((e,t)=>e.name.common.toLowerCase().localeCompare(t.name.common.toLowerCase()))}n.listen(a,()=>{console.log(`Server is running on port ${a}`)});
